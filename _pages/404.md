<script>
  try {
	const loc = window.location;
	// if configured in a route, eg: hafizulamz.github.io/url/google
	// let [_, shortenerHome, shortUrl, ...rest] = loc.pathname.split("/");
	// shortenerHome = "../" + shortenerHome

	// if conigured by a domain, eg: url.hafizulabdullah.com/google
	const shortenerHome = "/";
	const shortUrl = loc.pathname.split("/")[1];

	console.log({ shortenerHome, shortUrl });

	fetch("/assets/json/urlshortener.json")
	  .then((res) => res.json())
	  .then((res) => {
		console.log(res);
		const redirect = res[shortUrl];

		if (redirect) {
		  // if shorturl is present
		  document.title = shortUrl;
		  setTimeout(() => loc.replace(redirect), 0000);
		} else {
		  setTimeout(() => loc.replace(shortenerHome), 0000);
		}
	  })
	  .catch((err) => {
		setTimeout(() => loc.replace(shortenerHome), 0000);
	  });
  } catch (err) {
	setTimeout(() => loc.replace(shortenerHome), 0000);
  }
</script>